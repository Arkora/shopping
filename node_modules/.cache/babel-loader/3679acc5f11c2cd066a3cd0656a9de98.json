{"ast":null,"code":"import { ADD_CART, REMOVE_CART, UPDATE_QUANTITY, DELETE_CART } from '../constants/actionTypes';\nexport const cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    products: [],\n    total: 0\n  };\n  let {\n    type,\n    payload\n  } = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (type) {\n    case ADD_CART:\n      let exists = state.products.find(item => item.id === payload.id);\n      var product = {};\n      var addTotal = state.total;\n      var subTotal = 0;\n\n      if (!exists) {\n        subTotal = Number(payload.price) * Number(1);\n        product = {\n          id: payload.id,\n          title: payload.title,\n          quantity: Number(1),\n          price: Number(payload.price),\n          image: payload.image,\n          subTotal: Number(subTotal)\n        };\n        addTotal += subTotal;\n        state.products.push(product);\n      } else {\n        product = exists;\n        product.quantity += 1;\n        subTotal = Number(payload.price) * product.quantity;\n        product.subTotal = subTotal;\n        addTotal += Number(payload.price);\n      }\n\n      return { ...state,\n        products: [...state.products],\n        total: addTotal\n      };\n\n    case REMOVE_CART:\n      const clone = state.products;\n      product = state.products.find(item => item.id === payload);\n      addTotal = state.total - product.subTotal;\n      clone.splice(clone.indexOf(product), 1);\n      return { ...state,\n        products: clone,\n        total: addTotal\n      };\n\n    case UPDATE_QUANTITY:\n      product = state.products.find(item => item.id === payload.id);\n      product.quantity = payload.quantity;\n      subTotal = product.price * product.quantity;\n      addTotal = (newQuantity - product.quantity) * product.price + state.total;\n      product.subTotal = subTotal;\n      return { ...state,\n        products: [...state.products],\n        total: addTotal\n      };\n\n    case DELETE_CART:\n      return { ...state,\n        products: [],\n        total: 0\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ADD_CART","REMOVE_CART","UPDATE_QUANTITY","DELETE_CART","cartReducer","state","products","total","type","payload","exists","find","item","id","product","addTotal","subTotal","Number","price","title","quantity","image","push","clone","splice","indexOf","newQuantity"],"sources":["C:/Users/PC/Desktop/ecommerce/src/redux/reducers/cartReducer.js"],"sourcesContent":["import { ADD_CART,REMOVE_CART,UPDATE_QUANTITY,DELETE_CART } from '../constants/actionTypes'\r\n\r\nexport const cartReducer = (state = {products:[],total:0}, { type, payload }) =>{\r\n    switch(type){\r\n    case ADD_CART:\r\n        let exists = state.products.find((item) => item.id === payload.id)               \r\n        var product = {}\r\n        var addTotal = state.total\r\n        var subTotal = 0        \r\n        if(!exists) {\r\n          subTotal =  Number(payload.price)*Number(1)\r\n          product = {id:payload.id,title:payload.title,quantity:Number(1),price:Number(payload.price),image:payload.image,subTotal:Number(subTotal)}\r\n          addTotal +=subTotal\r\n          state.products.push(product)\r\n        }else{\r\n          product = exists        \r\n          product.quantity +=1\r\n          subTotal = Number(payload.price)*product.quantity\r\n          product.subTotal = subTotal\r\n          addTotal +=Number(payload.price)\r\n        }\r\n        return{...state,products:[...state.products],total:addTotal}\r\n        \r\n      case REMOVE_CART:\r\n         const clone = state.products;\r\n        product = state.products.find((item) => item.id === payload)\r\n        addTotal = state.total - product.subTotal\r\n        clone.splice(clone.indexOf(product),1)\r\n        return{...state,products:clone,total:addTotal}      \r\n\r\n      case UPDATE_QUANTITY:        \r\n        product = state.products.find((item) => item.id === payload.id)\r\n        product.quantity = payload.quantity\r\n        subTotal = product.price * product.quantity\r\n        addTotal = ((newQuantity-product.quantity)*product.price)+state.total \r\n        product.subTotal = subTotal        \r\n        return{...state,products:[...state.products],total:addTotal}\r\n        \r\n      case DELETE_CART:\r\n        return{...state,products:[],total:0}\r\n      default:\r\n        return state;\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}